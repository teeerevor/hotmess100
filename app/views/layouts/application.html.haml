!!!
%html
  %head
    %title
      Hotmess 100

    = stylesheet_link_tag '/assets/application'
    = stylesheet_link_tag '/assets/ui-progress-bar'

    %meta{name:"viewport", content:"initial-scale=1.0 maximum-scale=1.0 width=device-width"}
    %link{ rel:"icon", type:"image/ico", href: "/assets/favicon.ico"}

  %body
    #loading
      .ui-progress-bar.ui-container#progress_bar
        .ui-progress{style:"width: 7%;"}
          %span.ui-label
            %b.value

    #app.hidden
      #bg
        -#- @songs.shuffle.each_with_index do |song, i|
          -#- if song.album_img_url && i < 50
            -#%img{src:song.album_img_url}

      #header
        %img.logo{src:'/assets/hotmess100.gif'}
        %h1.hidden
          Hotmess100
        %span.hidden
          (Hottest100 messed with, for the better)
        -#%a{href:"#short_list"}
          -#Short List


      #app
        .sl_groove
          %section#short_list
            %a{name:'short_list'}
            %h2
              Short List

        %section#song_list
          %h2
            All Songs

        %nav.list_index
          - ('a'..'z').each do |letter|
            %a{href:"##{letter.upcase}"}
              %div
                =letter.upcase


      = yield

    -#= javascript_include_tag '//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min'
    -#= javascript_include_tag "//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject"
    = javascript_include_tag '/assets/jquery-1.7.1.min'
    = javascript_include_tag '/assets/swfobject'
    = javascript_include_tag '/assets/application'
    = yield_content :js
    :javascript
      window.songCount = #{Song.all.size}

      function onYouTubePlayerReady(playerId) {
        ytplayer = document.getElementById(playerId);
        var functionName = playerId+'_statechange'
        window[functionName] = function(newState) {
          hottestPlayer.yt_state_change(playerId, ytplayer, newState);
        }

        ytplayer.addEventListener("onStateChange", functionName);
      }

      function onYouTubeError(error) {
        window.console && console.log && console.log(error);
      }

